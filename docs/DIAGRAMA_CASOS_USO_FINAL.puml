@startuml
left to right direction

' Estilo StarUML - minimalista
skinparam backgroundColor #FFFFFF
skinparam shadowing false

skinparam actor {
  BackgroundColor #FFFFFF
  BorderColor #000000
  FontColor #000000
  FontSize 14
  FontStyle bold
}

skinparam usecase {
  BackgroundColor #FFFFFF
  BorderColor #000000
  BorderThickness 1
  FontColor #000000
  FontSize 12
  FontStyle plain
}

skinparam arrow {
  Color #000000
  FontColor #000000
  FontSize 11
  Thickness 1
}

skinparam rectangle {
  BorderColor #666666
  BackgroundColor #F8F8F8
  RoundCorner 10
}

' === ACTORES ===
actor "Administrador" as Admin
actor "Supervisor" as Supervisor
actor "Usuario" as User
actor "Sistema Externo" as ExternalSystem

' === SISTEMA PRINCIPAL ===
rectangle "Sistema de Seguridad con Reconocimiento Facial" {
  ' === ACCESO DEL USUARIO ===
  usecase "Solicitar Acceso" as UC_RequestAccess
  usecase "Procesar Rostro" as UC_ProcessFace
  usecase "Detectar Liveness" as UC_Liveness
  usecase "Tomar Decisión de Acceso" as UC_DecideAccess
  usecase "Validar Zona y Horario" as UC_ValidateZoneTime
  usecase "Registrar Evento" as UC_LogEvent
  usecase "Guardar Evidencia" as UC_SaveEvidence
  usecase "Generar Alerta" as UC_GenerateAlert
  usecase "Enviar Notificaciones" as UC_SendNotifications

  ' === ADMINISTRACIÓN ===
  usecase "Iniciar Sesión" as UC_Login
  usecase "Gestionar Usuarios" as UC_ManageUsers
  usecase "Registrar Rostro" as UC_RegisterFace
  usecase "Gestionar Reglas de Acceso" as UC_ManageRules
  usecase "Gestionar Zonas y Puntos de Control" as UC_ManageZonesCheckpoints
  usecase "Configurar Cámaras" as UC_ConfigureCameras
  usecase "Ver Auditoría y Reportes" as UC_ViewReports
  usecase "Configurar Sistema" as UC_ConfigureSystem

  ' === SUPERVISIÓN ===
  usecase "Monitorear Dashboard" as UC_MonitorDashboard
  usecase "Gestionar Alertas" as UC_ManageAlerts
}

' === RELACIONES CON ACTORES ===
User --> UC_RequestAccess

Admin --> UC_Login
Admin --> UC_ManageUsers
Admin --> UC_ManageRules
Admin --> UC_ManageZonesCheckpoints
Admin --> UC_ConfigureCameras
Admin --> UC_ViewReports
Admin --> UC_ConfigureSystem
Admin --> UC_ManageAlerts

Supervisor --> UC_Login
Supervisor --> UC_MonitorDashboard
Supervisor --> UC_ManageAlerts
Supervisor --> UC_ViewReports

' === FLUJO PRINCIPAL (INCLUDES) ===
UC_RequestAccess --> UC_ProcessFace : <<include>>
UC_ProcessFace --> UC_Liveness : <<include>>
UC_ProcessFace --> UC_DecideAccess : <<include>>
UC_DecideAccess --> UC_ValidateZoneTime : <<include>>
UC_DecideAccess --> UC_LogEvent : <<include>>
UC_LogEvent --> UC_SaveEvidence : <<include>>\n(Evidencia de acceso)

' === EXTENSIONES CONDICIONALES ===
UC_DecideAccess ..> UC_GenerateAlert : <<extend>>\n(acceso denegado / fuera de horario / zona restringida / desconocido)
UC_GenerateAlert --> UC_SaveEvidence : <<include>>\n(Evidencia de alerta)
UC_GenerateAlert --> UC_SendNotifications : <<include>>

' === ADMIN DETALLE ===
UC_ManageUsers --> UC_RegisterFace : <<include>>\n(Registro facial)
UC_ManageZonesCheckpoints --> UC_ConfigureCameras : <<include>>\n(Multi-cámara)

' === INTEGRACIONES EXTERNAS ===
UC_SendNotifications --> ExternalSystem

@enduml
